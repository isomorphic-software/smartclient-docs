# AutoTest Documentation

[← Back to API Index](../reference.md)

---

## Class: AutoTest

### Description
Standalone class providing a general interface for integration with Automated Testing Tools

For automated testing tools we need a way to create string identifiers for DOM elements such that when a page is reloaded, we can retrieve a functionally equivalent DOM element. We call these [autoTestLocators](../reference.md#type-autotestlocator).

This allows automated testing tools to set up or record user generated events on DOM elements then play them back on page reload and have our components react correctly.

The primary APIs for the AutoTest subsystem are [AutoTest.getLocator](#classmethod-autotestgetlocator) and [AutoTest.getElement](#classmethod-autotestgetelement).

Implementation considerations:

*   Some components react to the structure of DOM elements embedded within them - for example GridRenderer cells have meaning to the grid. So in some cases we need to identify elements within a component, while in others we can just return a pointer to a handle (A simple canvas click handler doesn't care about what native DOM element within the handle received the click).
*   When a DOM element is contained by a component, it is not sufficient to store the component ID. Most SmartClient components are auto-generated by their parents, and rather than attempting to store a specific component identifier we should instead store the "logical function" of the component.  
    For example a listGrid header button may have a different auto-generated ID across page reloads due to various timing-related issues (which can change the order of of widget creation), loading a new skin, or otherwise trivial changes to an application.  
    Rather than storing the header button ID therefore, we want to store this as a string meaning "The header button representing field X within this list grid".
*   fallback strategies: In some cases a component or DOM element can be identified in several ways. For example a cell in a ListGrid can be identified by simple row and column index, but also by fieldName and record primary key value. In these cases we attempt to record information for multiple locator strategies and then when parsing stored values we can provide APIs to govern which strategy is preferred. See the [LocatorStrategy](../reference.md#type-locatorstrategy) documentation for more on this.

In order to address these concerns the AutoTest locator pattern is similar to an XPath type structure, containing a root component identifier, followed by details of sub-components and then potentially details used to identify an element within the components handle in the DOM.  
The actual implementation covers a large number of common cases, including (but not limited to) the following. Note that for cases where an element is being identified from a pool of possible candidates, such as the [Canvas.children](Canvas.md#attr-canvaschildren) array, we usually will use [fallback locator paths](../reference.md#type-locatorstrategy) rather than simply relying on index:

*   Root level components identified by explicit ID
*   Any [autoChildren](../reference.md#type-autochild)
*   Standard component parts such as scrollbars, edges, shadows, etc
*   Section stack items and headers
*   Window items
*   ListGrid headers and cells
*   TreeGrid headers and cells, including interactive open icon, checkbox icons
*   DynamicForm form items, including details of elements within those items

### Groups

- autoTest

---
## ClassAttr: AutoTest.implicitNetworkWait

### Description
Controls whether certain AutoTest APIs wait for network operations to complete before returning true. When value is true, [AutoTest.isElementClickable](#classmethod-autotestiselementclickable) will return false until all network operations have completed.

### Groups

- autoTest

**Flags**: IRW

---
## ClassAttr: AutoTest.testRoot

### Description
Sets the implicit root canvas available in scLocators starting "//testRoot\[\]". Setting this property may enable one to use the same script to test identical widget hierarchies that are rooted under different base widgets.

### Groups

- autoTest

**Flags**: IRW

---
## ClassMethod: AutoTest.isElementReadyForKeyPresses

### Description
Given a DOM element, returns whether the associated SmartClient Canvas or FormItem is ready to receive keyPress events from a Selenium test. Returns null if the locator is not valid or doesn't represent a valid Canvas or FormItem. Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   if a [TextItem](TextItem.md#class-textitem), [FileItem](FileItem.md#class-fileitem), or [TextAreaItem](TextAreaItem.md#class-textareaitem), it has native focus,
*   the element satisfies [AutoTest.isElementClickable](#classmethod-autotestiselementclickable)

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [Canvas](#type-canvas)|[FormItem](#type-formitem)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas, form item, or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'ready' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.setTestRoot

### Description
Sets the implicit root canvas available in scLocators starting "//testRoot\[\]". Setting this property may enable one to use the same script to test identical widget hierarchies that are rooted under different base widgets.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| canvas | [Canvas](#type-canvas) | false | — | the implicit root |

### Groups

- autoTest

---
## ClassMethod: AutoTest.locateCanvasFromDOMElement

### Description
Given an element in the DOM, returns the canvas containing this element, or null if the element is not contained in any canvas handle.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [DOMElement](#type-domelement) | false | — | DOM element within in the page |

### Returns

`[Canvas](#type-canvas)` — canvas containing the element, or null if none apply

### Groups

- autoTest

---
## ClassMethod: AutoTest.isSystemDone

### Description
Returns whether the loaded page is in a consistent state with no pending operations. Specifically, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   all ListGrids (as defined by isc.isA.ListGrid) satisfy [AutoTest.isGridDone](#classmethod-autotestisgriddone)
*   all TileGrids that are drawn satisfy [AutoTest.isTileGridDone](#classmethod-autotestistilegriddone)
*   all TileLayouts that are drawn satisfy [AutoTest.isTileLayoutDone](#classmethod-autotestistilelayoutdone)
*   all DynamicForms that are drawn satisfy [AutoTest.isFormDone](#classmethod-autotestisformdone)
*   all Canvii that are drawn satisfy [AutoTest.isCanvasDone](#classmethod-autotestiscanvasdone)
*   no network operations are outstanding (configurable, see [AutoTest.implicitNetworkWait](#classattr-autotestimplicitnetworkwait))
*   there are no pending Canvas redraws (if includeRedraws parameter is true)

Note: In a situation where messaging is being used to periodically refresh components, or if the application contains a label updated every second to show the current time, it's possible that this call might always return false if includeRedraws is true.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| includeRedraws | [boolean](../reference.md#type-boolean) | true | — | whether to check for pending Canvas redraws |
| allowEdits | [boolean](../reference.md#type-boolean) | true | — | whether to allow unsaved edits for ListGrids |

### Returns

`[boolean](../reference.md#type-boolean)` — whether loaded page is 'done' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.isCanvasDone

### Description
Returns whether the canvas associated with the given DOM element is in a consistent state with no pending operations. Returns null if the argument is not valid or isn't associated with an element representing a valid canvas. Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   canvas is drawn
*   canvas isn't dirty
*   canvas has no queued overflow operations
*   canvas is not animating

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [Canvas](#type-canvas)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'done' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.isTileLayoutDone

### Description
Returns whether the TileLayout associated with the given DOM element is in a consistent state with no pending operations. Returns null if the argument is not valid or isn't associated with an element representing a valid TileLayout. Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   the TileLayout (as a canvas) satisfies [AutoTest.isCanvasDone](#classmethod-autotestiscanvasdone)
*   the TileLayout is not currently animating any layout operations

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [Canvas](#type-canvas)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'done' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.isItemDone

### Description
Returns whether the FormItem associated with the given DOM element is in a consistent state with no pending operations. Returns null if the argument is not valid or isn't associated with an element representing a valid [FormItem](FormItem.md#class-formitem). Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   if the container widget of the item isn't the parent DynamicForm, then the container widget must satisfy [AutoTest.isCanvasDone](#classmethod-autotestiscanvasdone) (or [AutoTest.isGridDone](#classmethod-autotestisgriddone), etc., as appropriate)
*   the item cannot have any fetches in progress for missing display/value field values
*   picklists ([SelectItem](SelectItem.md#class-selectitem) or [ComboBoxItem](ComboBoxItem.md#class-comboboxitem)) cannot have any pending row fetches
*   any contained [FormItem](FormItem.md#class-formitem)s must satisfy `isItemDone()` themselves
*   any contained [Canvas](Canvas.md#class-canvas) must satisfy [AutoTest.isCanvasDone](#classmethod-autotestiscanvasdone) (or [AutoTest.isGridDone](#classmethod-autotestisgriddone), etc., as appropriate)

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [FormItem](#type-formitem)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'done' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.isElementClickable

### Description
Returns whether the DOM element is ready to be clicked on by a Selenium test. Returns null if the argument is not valid or isn't associated with an element representing a valid canvas or form item. Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   no network operations are outstanding (configurable, see [AutoTest.implicitNetworkWait](#classattr-autotestimplicitnetworkwait))
*   canvas is visible, enabled, and not masked,
*   canvas satisfies [AutoTest.isCanvasDone](#classmethod-autotestiscanvasdone)
*   if canvas is a TileGrid, it satisfies [AutoTest.isTileGridDone](#classmethod-autotestistilegriddone)
*   if canvas is a TileLayout, it satisfies [AutoTest.isTileLayoutDone](#classmethod-autotestistilelayoutdone)
*   if canvas is a ListGrid or body of a ListGrid, it satisfies [AutoTest.isGridDone](#classmethod-autotestisgriddone)
*   if canvas is a DynamicForm, it satisfies [AutoTest.isFormDone](#classmethod-autotestisformdone)

Note that for a form item in a DynamicForm, the DynamicForm must satisfy the third condition above, while the container widget of the element must satisfy the remaining conditions.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [Canvas](#type-canvas)|[FormItem](#type-formitem)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas, form item, or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'clickable' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.isTileGridDone

### Description
Returns whether the TileGrid associated with the given DOM element is in a consistent state with no pending operations. Returns null if the argument is not valid or isn't associated with an element representing a valid TileGrid. Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   the TileGrid (as a tileLayout) satisfies [AutoTest.isTileLayoutDone](#classmethod-autotestistilelayoutdone)
*   the TileGrid has no pending layout animation operations queued

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [Canvas](#type-canvas)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'done' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.getLocatorWithIndicators

### Description
Returns the [QualityIndicatedLocator](../reference.md#object-qualityindicatedlocator) associated with some DOM element in a SmartClient application page. If coords, representing the page position, is passed in, the locator may be generated with a specific trailing "target area" identifer that will map back to the appropriate, potentially different, physical coordinates, even if the widget is moved. The coords argument will only have an effect in cases where the mouse position over the target could potentially change behavior.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| DOMElement | [DOMElement](#type-domelement) | false | — | DOM element within in the page. If null the locator for the last mouse event target will be generated |
| checkForNativeHandling | [boolean](../reference.md#type-boolean) | true | — | If this parameter is passed in, check whether the target element responds to native browser events directly rather than going through the SmartClient widget/event handling model. If we detect this case, return null rather than a live locator. This allows us to differentiate between (for example) an event on a Canvas handle, and an event occurring directly on a simple ``<a href=...>`` tag written inside a Canvas handle. |
| coords | [Array](#type-array) | true | — | X, Y page position |

### Returns

`[QualityIndicatedLocator](#type-qualityindicatedlocator)` — Locator details allowing the AutoTest subsystem to find an equivalent DOM element on subsequent page loads.

### Groups

- autoTest

---
## ClassMethod: AutoTest.getObject

### Description
Given an [AutoTestLocator](../reference.md#type-autotestlocator), return the live SmartClient object it refers to, if any.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| locator | [AutoTestLocator](../reference.md#type-autotestlocator) | false | — | Locator String previously returned by [AutoTest.getLocator](#classmethod-autotestgetlocator) |

### Returns

`[Canvas](#type-canvas)|[FormItem](#type-formitem)|[SectionStackSection](#type-sectionstacksection)` — target object, or null if unable to resolve the locator to a live object.

### Groups

- autoTest

---
## ClassMethod: AutoTest.getPageCoords

### Description
Returns the page-level coordinates corresponding to the supplied locator. Note: The physical position might change due to app redesign, but these coordinates would still reflect the same logical part of the DOM element for components where event position matters.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| locator | [AutoTestLocator](../reference.md#type-autotestlocator) | false | — | Locator String previously returned by [AutoTest.getLocator](#classmethod-autotestgetlocator) |

### Returns

`[Array](#type-array)` — X, Y page position

### Groups

- autoTest

---
## ClassMethod: AutoTest.getElement

### Description
—

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| locator | [AutoTestLocator](../reference.md#type-autotestlocator) | false | — | Locator String previously returned by [AutoTest.getLocator](#classmethod-autotestgetlocator) |

### Returns

`[DOMElement](#type-domelement)` — DOM element this locator refers to in the running application, or null if not found

### Groups

- autoTest

---
## ClassMethod: AutoTest.getLocator

### Description
Returns the [AutoTestLocator](../reference.md#type-autotestlocator) associated with some DOM element in a SmartClient application page. If coords, representing the page position, is passed in, the locator may be generated with a specific trailing "target area" identifer that will map back to the appropriate, potentially different, physical coordinates, even if the widget is moved. The coords argument will only have an effect in cases where the mouse position over the target could potentially change behavior.

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| DOMElement | [DOMElement](#type-domelement) | false | — | DOM element within in the page. If null the locator for the last mouse event target will be generated |
| checkForNativeHandling | [boolean](../reference.md#type-boolean) | true | — | If this parameter is passed in, check whether the target element responds to native browser events directly rather than going through the SmartClient widget/event handling model. If we detect this case, return null rather than a live locator. This allows us to differentiate between (for example) an event on a Canvas handle, and an event occurring directly on a simple ``<a href=...>`` tag written inside a Canvas handle. |
| coords | [Array](#type-array) | true | — | X, Y page position |

### Returns

`[AutoTestLocator](../reference.md#type-autotestlocator)` — Locator string allowing the AutoTest subsystem to find an equivalent DOM element on subsequent page loads.

### Groups

- autoTest

---
## ClassMethod: AutoTest.isFormDone

### Description
Returns whether the DynamicForm associated with the given DOM element is in a consistent state with no pending operations. Returns null if the argument is not valid or isn't associated with an element representing a valid [DynamicForm](DynamicForm.md#class-dynamicform). Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   form has no pending delayed "set values" or "set values focus" operations
*   all contained items satisfy [AutoTest.isItemDone](#classmethod-autotestisitemdone)

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [Canvas](#type-canvas)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'done' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.isGridDone

### Description
Returns whether the ListGrid associated with or contained by the given DOM element is in a consistent state with no pending operations. Returns null if the argument is not valid or isn't associated with an element inside a valid ListGrid. Otherwise, returns true or false according as the conditions below are all satisfied:

*   page has finished loading
*   no pending scroll operations
*   no pending filter editor operations
*   no unsaved edits to the grid records
*   no asynchronous regrouping operations are in progress
*   no outstanding fetch/filter operations are present for the ResultSet
*   no outstanding sort operations are present that will update the ListGrid

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| element | [Canvas](#type-canvas)|[DOMElement](#type-domelement)|[AutoTestLocator](../reference.md#type-autotestlocator) | false | — | DOM element to test (element obtained from canvas or SmartClient locator if provided) |

### Returns

`[Boolean](#type-boolean)` — whether element is 'done' as described above

### Groups

- autoTest

---
## ClassMethod: AutoTest.getValue

### Description
Given an [AutoTestLocator](../reference.md#type-autotestlocator) that refers to a live SmartClient object or a logical subcomponent of that object, return the associated meaningful JS value, if any.

For example:

*   For a locator to a ListGrid/CubeGrid cell, return the cell's value
*   For a locator to a FormItem, return the FormItem's value
*   For a locator to a ListGrid field header, return the checkbox/sorting state
*   For a locator to a Calendar EventCanvas header or body, return the text

### Parameters

| Name | Type | Optional | Default | Description |
|------|------|----------|---------|-------------|
| locator | [AutoTestLocator](../reference.md#type-autotestlocator) | false | — | Locator String previously returned by [AutoTest.getLocator](#classmethod-autotestgetlocator) |

### Returns

`[Object](../reference_2.md#type-object)` — value associated with SC object if any, otherwise undefined

### Groups

- autoTest

---
